services:
  hms.authentication.token:
    class: Drupal\hms\Authentication\Provider\Token
    arguments: ['@database', '@cache.hms', '@hms.client', '%hms.token.cache.ttl%', '%hms.token.name%']
    tags:
      - { name: authentication_provider, provider_id: 'hms_token', priority: 0, global: TRUE }

  hms.client:
    class: Drupal\hms\Client\Harbourmaster
    arguments: ['@http_client', '%hms.api.tenant%', '%hms.api.server%', '%hms.api.port%', '%hms.api.insecure%']

  cache.hms:
    class: Drupal\Core\Cache\CacheBackendInterface
    tags:
    - { name: cache.bin }
    factory: cache_factory:get
    arguments: ['hms']

parameters:
  hms.token.cache.ttl: 60
  hms.token.name: token
  hms.api.tenant: msg
  hms.api.server: harbourmaster.sso-service.dev
  hms.api.port: 49090
  hms.api.insecure: true